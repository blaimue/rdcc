<h1>Editing user</h1>

<% form_for(@user) do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </p>
  <p>
    <%= f.label :first_name %><br />
    <%= f.text_field :first_name %>
  </p>
  <p>
    <%= f.label :last_name %><br />
    <%= f.text_field :last_name %>
  </p>
  <p>
    <%= f.label :job_title %><br />
    <%= f.text_field :job_title %>
  </p>
	<p>
		<%= f.label :program %><br />
		<% for program in Program.all %>
			<%= f.radio_button :program_id, program.id %> <%= f.label :program_id, program.name, :value => program.id %><br />
		<% end %>
	</p>
  <p>
    <%= f.label :status %><br />
    <%= f.radio_button :status, User.STATUS[:fulltime] %>
        <%= f.label :status, User.status_names()[User.STATUS[:fulltime]], :value => User.STATUS[:fulltime] %><br />
    <%= f.radio_button :status, User.STATUS[:parttime] %>
        <%= f.label :status, User.status_names()[User.STATUS[:parttime]], :value => User.STATUS[:parttime] %><br />
    <%= f.radio_button :status, User.STATUS[:inactive] %>
        <%= f.label :status, User.status_names()[User.STATUS[:inactive]], :value => User.STATUS[:inactive] %><br />
  </p>

<table>
    <tr>
        <th></th>
        <th>None</th>
        <th>Staff</th>
        <th>Manager</th>
    </tr>
    <tr>
        <td>Program</td>
        <td>
            <%= f.radio_button :program_role, NONE %>
        </td><td>
            <%= f.radio_button :program_role, STAFF %>
        </td><td>
            <%= f.radio_button :program_role, MANAGER %>
        </td>
    </tr>
    <tr>
        <td>HR</td>
        <td>
            <%= f.radio_button :hr_role, NONE %>
        </td><td>
            <%= f.radio_button :hr_role, STAFF %>
        </td><td>
            <%= f.radio_button :hr_role, MANAGER %>
        </td>
    </tr>
    <tr>
        <td>Maintenance</td>
        <td>
            <%= f.radio_button :workorder_role, NONE %>
        </td><td>
            <%= f.radio_button :workorder_role, STAFF %>
        </td><td>
            <%= f.radio_button :workorder_role, MANAGER %>
        </td>
    </tr>
</table>

  <p>
    <%= f.label :emergency_contact_name %><br />
    <%= f.text_field :emergency_contact_name %>
  </p>
  <p>
    <%= f.label :emergency_contact_phone %><br />
    <%= f.text_field :emergency_contact_phone %>
  </p>
  <% if session[:user_id] == @user.id %>
      <p>
        <%= f.label :password %><br />
        <%= f.password_field :password %>
      </p>
      <p>
        <%= f.label :password_confirmation %><br />
        <%= f.password_field :password_confirmation %>
      </p>
  <% end %>
  
  <% if user_has_access? @user, PROGRAM, MANAGER %>
    <p>
      <label>SIR email preferences:</label><br />
      <%= f.radio_button :preferred_sir_emails, PREF_SIR_EMAILS[:none] %>
          <%= f.label :preferred_sir_emails, "None", :value => PREF_SIR_EMAILS[:none] %><br />
      <%= f.radio_button :preferred_sir_emails, PREF_SIR_EMAILS[:program] %>
          <%= f.label :preferred_sir_emails, "Program", :value => PREF_SIR_EMAILS[:program] %><br />
      <%= f.radio_button :preferred_sir_emails, PREF_SIR_EMAILS[:all] %>
          <%= f.label :preferred_sir_emails, "All", :value => PREF_SIR_EMAILS[:all] %><br />
    </p>
  <% end %>
  
  <p>
    <%= button 'user', 'Update' %>
  </p>
<% end %>

<p>
  <%= link_to 'Show', @user %>
</p>
